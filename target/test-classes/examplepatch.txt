@@ -1,40 +1,29 @@\n package controllers;\n \n import java.io.IOException;\n-import java.io.InputStreamReader;\n-import java.io.Reader;\n import java.net.URISyntaxException;\n-import java.nio.charset.Charset;\n \n-import org.apache.http.HttpEntity;\n import org.apache.http.HttpResponse;\n import org.apache.http.client.ClientProtocolException;\n import org.apache.http.client.methods.HttpGet;\n-import org.apache.http.entity.ContentType;\n-\n-import com.google.gson.Gson;\n-import com.google.gson.GsonBuilder;\n \n import domain.SearchCommitResponse;\n+import services.SearchCommitService;\n \n public class Controller {\n \n \tVersionControlGateway vcg;\n+\tSearchCommitService scs;\n \n \tpublic Controller() {\n \t\tthis.vcg = new VersionControlGateway();\n+\t\tthis.scs = new SearchCommitService();\n \t}\n \n-\tpublic String[] generateRecommendations(String source, String target)\n-\t\t\tthrows URISyntaxException, ClientProtocolException, IOException {\n+\tpublic String[] generateRecommendations(String source, String target) throws URISyntaxException, ClientProtocolException, IOException {\n \t\tHttpGet request = vcg.buildSearchCommitRequestBody(source, target);\n \t\tHttpResponse response = vcg.executeHttpRequest(request);\n-\t\tHttpEntity entity = response.getEntity();\n-\t\tGson gson = new GsonBuilder().create();\n-\t\tContentType contentType = ContentType.getOrDefault(entity);\n-\t\tCharset charset = contentType.getCharset();\n-\t\tReader reader = new InputStreamReader(entity.getContent(), charset);\n-\t\tSearchCommitResponse searchCommitResponse = gson.fromJson(reader, SearchCommitResponse.class);\n+\t\tSearchCommitResponse searchCommitResponse = scs.createNewSearchCommitResponse(response);\n \t\treturn null;\n \t}\n 